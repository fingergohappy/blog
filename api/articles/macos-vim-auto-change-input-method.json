{"title":"macos下,实现vim切换模式自动切换输入法","uid":"a80e863ad04e203843f50e139a5edeb2","slug":"macos-vim-auto-change-input-method","date":"2023-09-20T10:37:19.000Z","updated":"2023-09-26T05:01:59.340Z","comments":true,"path":"api/articles/macos-vim-auto-change-input-method.json","keywords":null,"cover":"https://source.unsplash.com/m_HRfLhgABo/1200x628","content":"<h1 id=\"macos下-实现vim切换模式自动切换输入法\"><a href=\"#macos下-实现vim切换模式自动切换输入法\" class=\"headerlink\" title=\"macos下,实现vim切换模式自动切换输入法\"></a>macos下,实现vim切换模式自动切换输入法</h1><p>作为一个重度<code>vim</code>模式使用用户,切换模式输入法不自动切换一直是一个蛋疼的问题,目前主要解决方案就是使用<code>im-select</code>,在对应使用的应用里面设置<code>im-select</code>的路径<br>但是这种方式有一个问题就是如果应用不支持,就不会自动切换</p>\n<p>另一种方式就是使用<code>rime</code>输入法,但是对于我来说配置成本太高,不划算.</p>\n<p>经过我的研究,发现<code>karabiner</code>可以实现在任意应用中使用<code>vim</code>,按下对应的模式切换键实现自动切换输入法.</p>\n<h2 id=\"安装karabiner\"><a href=\"#安装karabiner\" class=\"headerlink\" title=\"安装karabiner\"></a>安装karabiner</h2><p><code>karabiner</code>是mac下一个按键功能映射的软件,可以自己定义<code>json</code>文件实现许多复杂的功能的映射</p>\n<p><code>brew</code>不解释连招</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dracula\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #50FA7B\">brew</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #F1FA8C\">install</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #F1FA8C\">karabiner</span></span></code></pre></div><h2 id=\"安装im-select\"><a href=\"#安装im-select\" class=\"headerlink\" title=\"安装im-select\"></a>安装im-select</h2><p>继续<code>brew</code>不解释连招</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dracula\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #50FA7B\">brew</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #F1FA8C\">install</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #F1FA8C\">im-select</span></span></code></pre></div><h2 id=\"创建映射文件\"><a href=\"#创建映射文件\" class=\"headerlink\" title=\"创建映射文件\"></a>创建映射文件</h2><p><code>/Users/fingerfrings/.config/karabiner/assets/complex_modifications</code>路径创建一个<code>vim-esc.json</code>文件</p>\n<p>文件内容如下:</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki dracula\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F8F8F2\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">  </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">title</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Vim shortcuts</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">,</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">  </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">rules</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> [</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">     &#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">      </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">description</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Map ^+[ to esc</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">,</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">      </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">manipulators</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> [</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        &#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">          </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">type</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">basic</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">,</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">          </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">from</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">key_code</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">open_bracket</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">,</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">modifiers</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">              </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">mandatory</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> [</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">control</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">]</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            &#125;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">          &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">          </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">to</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> [</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            &#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">              </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">key_code</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">escape</span><span style=\"color: #E9F284\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            &#125;,&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">              </span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #8BE9FD\">shell_command</span><span style=\"color: #8BE9FE\">&quot;</span><span style=\"color: #FF79C6\">:</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">/usr/local/bin/im-select com.apple.keylayout.ABC</span><span style=\"color: #E9F284\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">            &#125;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">          ]</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">      ]</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">     &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">  ]</span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>上面文件的映射内容就是将<code>Ctrl-[</code>映射为<code>Esc</code>,同时执行<code>/usr/local/bin/im-select com.apple.keylayout.ABC</code>命令</p>\n<h2 id=\"设置karabiner\"><a href=\"#设置karabiner\" class=\"headerlink\" title=\"设置karabiner\"></a>设置karabiner</h2><p>在<code>complex Modifications</code>选项中启用<code>Map ^+[ to esc</code></p>\n<h2 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h2><p><a href=\"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to/shell-command/\">https://karabiner-elements.pqrs.org/docs</a></p>\n","feature":true,"text":"macos结合使用,vim切换模式实现自动切换输入法...","permalink":"/post/macos-vim-auto-change-input-method","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"some litttle tricks","slug":"some-litttle-tricks","count":1,"path":"api/categories/some-litttle-tricks.json"}],"tags":[{"name":"vim","slug":"vim","count":3,"path":"api/tags/vim.json"},{"name":"macos","slug":"macos","count":1,"path":"api/tags/macos.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#macos%E4%B8%8B-%E5%AE%9E%E7%8E%B0vim%E5%88%87%E6%8D%A2%E6%A8%A1%E5%BC%8F%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95\"><span class=\"toc-text\">macos下,实现vim切换模式自动切换输入法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85karabiner\"><span class=\"toc-text\">安装karabiner</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85im-select\"><span class=\"toc-text\">安装im-select</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">创建映射文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AEkarabiner\"><span class=\"toc-text\">设置karabiner</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">参考文档</span></a></li></ol></li></ol>","author":{"name":"finger","slug":"blog-author","avatar":"/assets/images/logo.jpg","link":"/","description":"do something funny","socials":{"github":"https://github.com/fingergohappy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"java byte array 转String在转回byte array不相等","uid":"21c88c674175238dff17f5ecc1cb05a5","slug":"java-byte-convert-string-not-equal","date":"2023-09-21T20:39:21.000Z","updated":"2023-09-26T05:01:59.340Z","comments":true,"path":"api/articles/java-byte-convert-string-not-equal.json","keywords":null,"cover":"https://source.unsplash.com/AtccjBkdl-I/1200x628","text":"java byte array 转String在转回byte array不相等...","permalink":"/post/java-byte-convert-string-not-equal","photos":[],"count_time":{"symbolsCount":"4.9k","symbolsTime":"4 mins."},"categories":[{"name":"java","slug":"java","count":1,"path":"api/categories/java.json"}],"tags":[{"name":"java","slug":"java","count":1,"path":"api/tags/java.json"},{"name":"encode","slug":"encode","count":1,"path":"api/tags/encode.json"}],"author":{"name":"finger","slug":"blog-author","avatar":"/assets/images/logo.jpg","link":"/","description":"do something funny","socials":{"github":"https://github.com/fingergohappy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"hexo push后自动部署github pages","uid":"3a126c86808bf36e1aa89411751a60c9","slug":"hexo-auto-deploy","date":"2023-09-20T09:31:18.000Z","updated":"2023-09-26T05:01:59.328Z","comments":true,"path":"api/articles/hexo-auto-deploy.json","keywords":null,"cover":"https://source.unsplash.com/lzh3hPtJz9c/1200x628","text":"hexo 提交后自动部署github page...","permalink":"/post/hexo-auto-deploy","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"hexo","slug":"hexo","count":1,"path":"api/categories/hexo.json"}],"tags":[{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"}],"author":{"name":"finger","slug":"blog-author","avatar":"/assets/images/logo.jpg","link":"/","description":"do something funny","socials":{"github":"https://github.com/fingergohappy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}